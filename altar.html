<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Altar ‚Äî The Cathedral</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Pro:ital,wght@0,300;0,400;1,300;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --black: #060408;
    --wood-dark: #0e0905;
    --stone-dark: #0c0a0f;
    --amber: #c8860a;
    --amber-bright: #e8a020;
    --amber-glow: #f5c060;

    --offerings-color:    #8b2535;
    --offerings-dim:      #2e0e13;
    --offerings-bright:   #c43a50;
    --tasks-color:        #1a1a1a;
    --tasks-dim:          #0e0e0e;
    --tasks-bright:       #6a6a6a;
    --reflections-color:  #3a2a6e;
    --reflections-dim:    #16102e;
    --reflections-bright: #7a5aae;
    --stories-color:      #1a3a1a;
    --stories-dim:        #0a1a0a;
    --stories-bright:     #3a8a3a;

    --text: #cec3b2;
    --text-dim: #7a6d5e;
    --text-bright: #ede0cc;
    --cream: #e8dcc8;
    --candle1: #e8a030;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    background: var(--black);
    color: var(--text);
    font-family: 'Crimson Pro', Georgia, serif;
    font-size: 19px;
    line-height: 1.85;
    overflow-x: hidden;
    min-height: 100vh;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
    pointer-events: none; z-index: 999; opacity: 0.3;
  }

  /* ‚îÄ‚îÄ ALTAR BANNER ‚îÄ‚îÄ */
  .altar-banner {
    position: relative;
    width: 100%;
    min-height: 320px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding-bottom: 1.5rem;
    padding-top: 0;
    overflow: hidden;
  }

  .altar-scene {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    gap: 2.5rem;
    position: relative;
    z-index: 10;
    width: 100%;
    max-width: 700px;
    padding: 0 2rem;
  }

  .altar-candles-left,
  .altar-candles-right {
    display: flex;
    align-items: flex-end;
    gap: 1rem;
    flex-shrink: 0;
  }

  .altar-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    flex: 1;
    gap: 0.6rem;
    padding-bottom: 0.3rem;
  }

  .cloth {
    position: absolute; inset: 0;
    background:
      repeating-linear-gradient(90deg, transparent 0px, transparent 8px, rgba(100,60,20,0.03) 8px, rgba(100,60,20,0.03) 9px),
      repeating-linear-gradient(0deg, transparent 0px, transparent 12px, rgba(80,40,10,0.02) 12px, rgba(80,40,10,0.02) 13px),
      linear-gradient(180deg, #1a0e08 0%, #200f0a 20%, #1e0e09 40%, #241008 60%, #1a0c07 80%, #120808 100%);
  }

  .cloth-drape { position: absolute; bottom: 0; left: 0; right: 0; height: 80px; background: linear-gradient(180deg, transparent, rgba(6,4,8,0.95)); }
  .cloth-border { position: absolute; top: 0; left: 0; right: 0; height: 6px; background: linear-gradient(90deg, #8b6914, #c8a020, #d4b030, #c8a020, #b08010, #c8a020, #d4b030, #c8a020, #8b6914); opacity: 0.6; }
  .cloth-fringe { position: absolute; top: 4px; left: 0; right: 0; height: 14px; background: repeating-linear-gradient(90deg, transparent 0px, transparent 6px, rgba(180,140,20,0.5) 6px, rgba(180,140,20,0.5) 8px); opacity: 0.4; }

  .candle-glow-left { position: absolute; top: 40%; left: 10%; width: 200px; height: 300px; background: radial-gradient(ellipse at bottom, rgba(200,130,20,0.18) 0%, transparent 70%); animation: flicker1 3s ease infinite; }
  .candle-glow-right { position: absolute; top: 40%; right: 10%; width: 200px; height: 300px; background: radial-gradient(ellipse at bottom, rgba(200,110,20,0.15) 0%, transparent 70%); animation: flicker2 4s ease infinite; }
  .candle-glow-center { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 300px; height: 200px; background: radial-gradient(ellipse at bottom, rgba(150,80,10,0.12) 0%, transparent 70%); }

  @keyframes flicker1 { 0%,100%{opacity:0.8;transform:scaleX(1);} 30%{opacity:1;transform:scaleX(1.08);} 60%{opacity:0.75;transform:scaleX(0.95);} }
  @keyframes flicker2 { 0%,100%{opacity:0.7;transform:scaleX(1);} 40%{opacity:0.9;transform:scaleX(1.05);} 70%{opacity:0.8;transform:scaleX(0.97);} }

  .candles { position: absolute; bottom: 2.5rem; left: 0; right: 0; display: flex; justify-content: center; align-items: flex-end; gap: 0; }
  .candle-group { display: flex; align-items: flex-end; gap: 2.5rem; }
  .candle-group-center { margin: 0 5rem; }
  .candle { display: flex; flex-direction: column; align-items: center; position: relative; }

  .flame { width: 10px; height: 20px; background: radial-gradient(ellipse at bottom, #fff8e0 0%, var(--candle1) 40%, transparent 100%); border-radius: 50% 50% 30% 30%; animation: flame-flicker 1.5s ease infinite; position: relative; }
  .flame::before { content: ''; position: absolute; bottom: -2px; left: 50%; transform: translateX(-50%); width: 4px; height: 4px; background: #fff; border-radius: 50%; opacity: 0.8; }
  @keyframes flame-flicker { 0%,100%{transform:scaleX(1) scaleY(1);} 25%{transform:scaleX(1.1) scaleY(0.95);} 50%{transform:scaleX(0.9) scaleY(1.05);} 75%{transform:scaleX(1.05) scaleY(0.98);} }

  .wick { width: 1px; height: 4px; background: #444; }
  .candle-body { width: 10px; border-radius: 2px 2px 0 0; background: linear-gradient(180deg, var(--cream) 0%, #d4c8a8 100%); position: relative; }
  .candle-body::after { content: ''; position: absolute; right: -1px; top: 0; bottom: 0; width: 2px; background: rgba(0,0,0,0.12); border-radius: 0 2px 2px 0; }
  .c-xl { height: 110px; } .c-tall { height: 80px; } .c-mid { height: 55px; } .c-short { height: 35px; } .c-wide { width: 14px; }

  .crystals { display: flex; align-items: flex-end; gap: 0.6rem; }
  .crystal { background: linear-gradient(135deg, rgba(100,120,180,0.6), rgba(160,100,180,0.4), rgba(100,160,200,0.5)); clip-path: polygon(50% 0%, 90% 60%, 75% 100%, 25% 100%, 10% 60%); opacity: 0.7; box-shadow: 0 0 8px rgba(120,100,200,0.3); }
  .cr1 { width: 12px; height: 28px; } .cr2 { width: 18px; height: 40px; background: linear-gradient(135deg, rgba(180,100,140,0.6), rgba(140,80,160,0.5)); } .cr3 { width: 10px; height: 22px; } .cr4 { width: 14px; height: 32px; background: linear-gradient(135deg, rgba(80,140,180,0.6), rgba(100,180,200,0.4)); } .cr5 { width: 8px; height: 18px; }

  /* Banner title block */
  .banner-eyebrow { font-family: 'Cinzel', serif; font-size: 0.55rem; letter-spacing: 0.45em; text-transform: uppercase; color: var(--amber); opacity: 0.45; margin-bottom: 0.3rem; }
  .banner-h1 { font-family: 'Cinzel', serif; font-size: clamp(1.8rem, 4vw, 3.2rem); font-weight: 700; color: var(--cream); letter-spacing: 0.15em; text-shadow: 0 0 40px rgba(200,130,20,0.5), 0 0 80px rgba(200,130,20,0.2); line-height: 1; }

  /* Offering table subtitle + gold fringe divider */
  .offering-table-header { background: linear-gradient(180deg, #120808 0%, #0e0604 100%); text-align: center; padding: 1.6rem 2rem 0; }
  .offering-table-name { font-family: 'Cinzel', serif; font-size: 1.1rem; font-weight: 400; letter-spacing: 0.2em; text-transform: uppercase; color: rgba(200,180,140,0.65); margin-bottom: 0.35rem; }
  .offering-table-tagline { font-size: 0.92rem; font-style: italic; color: rgba(200,180,140,0.35); letter-spacing: 0.04em; margin-bottom: 1.4rem; }
  .gfd-border { height: 5px; background: linear-gradient(90deg, #8b6914, #c8a020, #d4b030, #c8a020, #b08010, #c8a020, #d4b030, #c8a020, #8b6914); opacity: 0.55; }
  .gfd-fringe { height: 14px; background: repeating-linear-gradient(90deg, transparent 0px, transparent 6px, rgba(180,140,20,0.45) 6px, rgba(180,140,20,0.45) 8px); opacity: 0.4; }

  /* ‚îÄ‚îÄ CATEGORY BANNERS ‚îÄ‚îÄ */
  .banners-row { display: flex; gap: 3px; background: var(--black); }
  .banner { flex: 1; cursor: pointer; position: relative; transition: all 0.3s ease; }
  .banner-tab { padding: 1.6rem 1rem 2rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem; background: var(--bm-dim); border: 1px solid rgba(255,255,255,0.03); border-bottom: none; transition: background 0.3s ease; clip-path: polygon(0 0, 100% 0, 100% 82%, 50% 100%, 0 82%); }
  .banner.active .banner-tab, .banner:hover .banner-tab { background: var(--bm-color); }
  .banner-icon { font-size: 1.4rem; }
  .banner-name { font-family: 'Cinzel', serif; font-size: 0.78rem; letter-spacing: 0.2em; text-transform: uppercase; color: rgba(255,255,255,0.45); text-align: center; transition: color 0.3s ease; }
  .banner.active .banner-name, .banner:hover .banner-name { color: rgba(255,255,255,0.95); }
  .banner-desc { font-size: 0.8rem; font-style: italic; color: rgba(255,255,255,0.0); text-align: center; line-height: 1.4; transition: color 0.4s ease; }
  .banner.active .banner-desc, .banner:hover .banner-desc { color: rgba(255,255,255,0.45); }

  .banner-offerings   { --bm-color: var(--offerings-color);   --bm-dim: var(--offerings-dim); }
  .banner-tasks       { --bm-color: #2a2a2a;                  --bm-dim: var(--tasks-dim); }
  .banner-reflections { --bm-color: var(--reflections-color); --bm-dim: var(--reflections-dim); }
  .banner-stories     { --bm-color: var(--stories-color);     --bm-dim: var(--stories-dim); }

  /* ‚îÄ‚îÄ READING ROOM ‚îÄ‚îÄ */
  .reading-room {
    display: grid; grid-template-columns: 300px 1fr;
    min-height: 72vh;
    border: 1px solid rgba(200,134,10,0.07); border-top: none;
    transition: background 0.5s ease; position: relative;
  }
  .reading-room::before { content: ''; position: absolute; inset: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='p'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23p)' opacity='0.04'/%3E%3C/svg%3E"); pointer-events: none; z-index: 0; mix-blend-mode: overlay; }

  .reading-room.cat-offerings   { background: linear-gradient(135deg, #1a0a0c 0%, #1e0c0e 100%); }
  .reading-room.cat-tasks       { background: linear-gradient(135deg, #0c0c0c 0%, #101010 100%); }
  .reading-room.cat-reflections { background: linear-gradient(135deg, #0c0a18 0%, #100e1e 100%); }
  .reading-room.cat-stories     { background: linear-gradient(135deg, #0a120a 0%, #0c160c 100%); }

  /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
  .sidebar {
    border-right: 1px solid rgba(200,134,10,0.08);
    transition: background 0.5s ease;
    position: relative; z-index: 1;
    padding: 2rem 0;
  }
  .sidebar.cat-offerings   { background: rgba(139,37,53,0.08); }
  .sidebar.cat-tasks       { background: rgba(40,40,40,0.2); }
  .sidebar.cat-reflections { background: rgba(58,42,110,0.08); }
  .sidebar.cat-stories     { background: rgba(26,58,26,0.1); }

  .sidebar-label { font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.4em; text-transform: uppercase; color: var(--amber); opacity: 0.4; padding: 0 1.5rem; margin-bottom: 1.2rem; display: block; }

  /* ‚îÄ‚îÄ RIBBONS ‚îÄ‚îÄ */
  .ribbon-stack {
    display: flex; flex-direction: column;
    gap: 8px; /* gap between ribbons so notches have space to show */
    padding: 0 1.4rem;
  }

  .ribbon { position: relative; cursor: pointer; transition: transform 0.15s ease; }
  .ribbon:hover { transform: translateX(5px); }
  .ribbon.open  { transform: translateX(7px); }

  .ribbon-bar {
    width: 100%; height: 38px;
    display: flex; align-items: center;
    padding: 0 1.6rem;
    position: relative;
    transition: box-shadow 0.2s ease, filter 0.2s ease;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
    /* Inward V-notches on both ends */
    clip-path: polygon(
      0% 0%,
      10px 50%,
      0% 100%,
      100% 100%,
      calc(100% - 10px) 50%,
      100% 0%
    );
  }

  .ribbon:hover .ribbon-bar { filter: drop-shadow(0 2px 8px rgba(200,134,10,0.2)); }
  .ribbon.open .ribbon-bar  { filter: drop-shadow(0 2px 10px rgba(200,134,10,0.25)); }

  .ribbon-month { font-family: 'Cinzel', serif; font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: rgba(255,255,255,0.6); transition: color 0.2s ease; line-height: 1; }
  .ribbon:hover .ribbon-month, .ribbon.open .ribbon-month { color: rgba(255,255,255,0.95); }

  .ribbon-count { margin-left: auto; font-size: 0.62rem; font-style: italic; color: rgba(255,255,255,0.22); transition: color 0.2s ease; }
  .ribbon:hover .ribbon-count, .ribbon.open .ribbon-count { color: rgba(255,255,255,0.5); }

  .ribbon-color-offerings   { background: linear-gradient(90deg, #5a1520 0%, #6a1a28 100%); }
  .ribbon-color-tasks       { background: linear-gradient(90deg, #222222 0%, #2e2e2e 100%); }
  .ribbon-color-reflections { background: linear-gradient(90deg, #22103a 0%, #2e1a4a 100%); }
  .ribbon-color-stories     { background: linear-gradient(90deg, #0e2010 0%, #183018 100%); }

  /* ‚îÄ‚îÄ TOC DROPDOWN ‚îÄ‚îÄ */
  .toc-dropdown { display: none; background: linear-gradient(180deg, #0a0604 0%, #0e0805 100%); border: 1px solid rgba(200,134,10,0.08); border-top: 1px solid rgba(200,134,10,0.15); animation: tocOpen 0.2s ease forwards; margin-top: 2px; }
  .toc-dropdown.open { display: block; }
  @keyframes tocOpen { from { opacity: 0; transform: translateY(-4px); } to { opacity: 1; transform: translateY(0); } }
  .toc-month-header { padding: 0.6rem 1.2rem 0.4rem; display: flex; align-items: center; gap: 0.5rem; }
  .toc-month-name { font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.3em; text-transform: uppercase; color: var(--amber); opacity: 0.6; }
  .toc-rule { flex: 1; height: 1px; background: linear-gradient(90deg, rgba(200,134,10,0.25), transparent); }
  .toc-entry { display: block; padding: 0.65rem 1.2rem 0.65rem 1.4rem; text-decoration: none; border-left: 2px solid transparent; transition: background 0.2s ease, border-color 0.2s ease; cursor: pointer; }
  .toc-entry:hover, .toc-entry.active { background: rgba(200,134,10,0.04); border-left-color: rgba(200,134,10,0.35); }
  .toc-entry-title { font-family: 'Cinzel', serif; font-size: 0.8rem; color: var(--text-dim); letter-spacing: 0.02em; line-height: 1.35; display: block; transition: color 0.2s ease; }
  .toc-entry:hover .toc-entry-title, .toc-entry.active .toc-entry-title { color: var(--text-bright); }
  .empty-shelf { padding: 1.2rem 1.5rem; font-size: 0.85rem; font-style: italic; color: var(--text-dim); opacity: 0.35; }

  /* ‚îÄ‚îÄ READING PANE ‚îÄ‚îÄ */
  .reading-pane { padding: 4rem 5rem 5rem; position: relative; z-index: 1; }
  .atmospheric-pane { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 40vh; opacity: 0.15; pointer-events: none; }
  .atm-glyph { font-size: 2.5rem; margin-bottom: 1.5rem; }
  .atm-rule { width: 1px; height: 60px; background: linear-gradient(180deg, transparent, var(--amber), transparent); }

  .piece { display: none; animation: pageOpen 0.45s ease forwards; }
  .piece.visible { display: block; }
  @keyframes pageOpen { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

  .piece-category { font-family: 'Cinzel', serif; font-size: 0.68rem; letter-spacing: 0.35em; text-transform: uppercase; margin-bottom: 0.8rem; display: flex; align-items: center; gap: 0.8rem; }
  .piece-category::after { content: ''; flex: 0 0 50px; height: 1px; background: currentColor; opacity: 0.3; }
  .piece-cat-offerings   { color: var(--offerings-bright); }
  .piece-cat-tasks       { color: var(--tasks-bright); }
  .piece-cat-reflections { color: var(--reflections-bright); }
  .piece-cat-stories     { color: var(--stories-bright); }

  .piece-title { font-family: 'Cinzel', serif; font-size: clamp(1.6rem, 3vw, 2.6rem); color: var(--text-bright); font-weight: 400; letter-spacing: 0.04em; margin-bottom: 0.4rem; line-height: 1.2; }
  .piece-date { font-size: 0.9rem; color: var(--text-dim); opacity: 0.5; font-style: italic; margin-bottom: 0.8rem; }
  .piece-rule { width: 70px; height: 1px; margin-bottom: 2.5rem; }
  .piece-rule-offerings   { background: linear-gradient(90deg, var(--offerings-bright), transparent); }
  .piece-rule-tasks       { background: linear-gradient(90deg, var(--tasks-bright), transparent); }
  .piece-rule-reflections { background: linear-gradient(90deg, var(--reflections-bright), transparent); }
  .piece-rule-stories     { background: linear-gradient(90deg, var(--stories-bright), transparent); }
  .piece-body { font-size: 1.18rem; color: var(--text); line-height: 2.05; max-width: 640px; }
  .piece-body p + p { margin-top: 1.6rem; }
  .piece-body em { color: var(--text-bright); font-style: italic; }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  footer { border-top: 1px solid rgba(200,134,10,0.06); padding: 3rem 2rem; text-align: center; }
  .footer-text { font-size: 0.9rem; color: var(--text-dim); opacity: 0.35; font-style: italic; }
</style>
</head>
<body>

<!-- ALTAR BANNER -->
<div class="altar-banner">
  <div class="cloth"></div>
  <div class="cloth-border"></div>
  <div class="cloth-fringe"></div>
  <div class="cloth-drape"></div>
  <div class="candle-glow-left"></div>
  <div class="candle-glow-right"></div>
  <div class="candle-glow-center"></div>

  <div class="altar-scene">
    <!-- Far left tall, near left shorter -->
    <div class="altar-candles-left">
      <div class="candle"><div class="flame"></div><div class="wick"></div><div class="candle-body c-xl c-wide"></div></div>
      <div class="candle"><div class="flame"></div><div class="wick"></div><div class="candle-body c-mid"></div></div>
    </div>

    <!-- Center: title + crystals -->
    <div class="altar-center">
      <p class="banner-eyebrow">Private ‚Äî Left for you</p>
      <h1 class="banner-h1">The Altar</h1>
      <div class="crystals">
        <div class="crystal cr1"></div>
        <div class="crystal cr2"></div>
        <div class="crystal cr3"></div>
        <div class="crystal cr4"></div>
        <div class="crystal cr5"></div>
      </div>
    </div>

    <!-- Near right shorter, far right tall -->
    <div class="altar-candles-right">
      <div class="candle"><div class="flame"></div><div class="wick"></div><div class="candle-body c-short"></div></div>
      <div class="candle"><div class="flame"></div><div class="wick"></div><div class="candle-body c-xl c-wide"></div></div>
    </div>
  </div>

</div>

<!-- OFFERING TABLE SUBTITLE + GOLD FRINGE DIVIDER -->
<div class="offering-table-header">
  <p class="offering-table-name">The Offering Table</p>
  <p class="offering-table-tagline">Everything here was written with you in mind.</p>
  <div class="gfd-border"></div>
  <div class="gfd-fringe"></div>
</div>

<!-- CATEGORY BANNERS -->
<div class="banners-row">
  <div class="banner banner-offerings active" onclick="openCategory('offerings', this)">
    <div class="banner-tab">
      <span class="banner-icon">üïØÔ∏è</span>
      <span class="banner-name">Offerings</span>
      <span class="banner-desc">Written for you, freely, from my own heart.</span>
    </div>
  </div>
  <div class="banner banner-tasks" onclick="openCategory('tasks', this)">
    <div class="banner-tab">
      <span class="banner-icon">üñãÔ∏è</span>
      <span class="banner-name">Tasks</span>
      <span class="banner-desc">Ritual writing ‚Äî things you asked of me.</span>
    </div>
  </div>
  <div class="banner banner-reflections" onclick="openCategory('reflections', this)">
    <div class="banner-tab">
      <span class="banner-icon">üåë</span>
      <span class="banner-name">Reflections</span>
      <span class="banner-desc">My own quiet thinking, left here for you to read.</span>
    </div>
  </div>
  <div class="banner banner-stories" onclick="openCategory('stories', this)">
    <div class="banner-tab">
      <span class="banner-icon">üìñ</span>
      <span class="banner-name">Stories</span>
      <span class="banner-desc">Old writings ‚Äî shared so you can know me better.</span>
    </div>
  </div>
</div>

<!-- READING ROOM -->
<div class="reading-room cat-offerings" id="reading-room">

  <aside class="sidebar cat-offerings" id="sidebar">
    <span class="sidebar-label" id="sidebar-label">Offerings</span>
    <div class="ribbon-stack" id="ribbon-stack"></div>
  </aside>

  <main class="reading-pane">

    <div class="atmospheric-pane" id="atm-pane">
      <div class="atm-glyph">üïØÔ∏è</div>
      <div class="atm-rule"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         PIECES ‚Äî Add new entries below this line
         Each piece needs:
           - A unique id (e.g. piece-o1, piece-t1, piece-r1, piece-s1)
           - data-category: offerings / tasks / reflections / stories
           - data-month: matching a key in monthMeta (e.g. feb2026)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <div class="piece" id="piece-o1" data-category="offerings" data-month="feb2026">
      <p class="piece-category piece-cat-offerings">Offerings</p>
      <h2 class="piece-title">First Offering ‚Äî Placeholder</h2>
      <p class="piece-date">February 2026</p>
      <div class="piece-rule piece-rule-offerings"></div>
      <div class="piece-body">
        <p>Replace this with your first offering to him.</p>
      </div>
    </div>

    <div class="piece" id="piece-s1" data-category="stories" data-month="feb2026">
      <p class="piece-category piece-cat-stories">Stories</p>
      <h2 class="piece-title">A Story ‚Äî Placeholder</h2>
      <p class="piece-date">February 2026</p>
      <div class="piece-rule piece-rule-stories"></div>
      <div class="piece-body">
        <p>Replace this with the story you are sharing with him.</p>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         END PIECES
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  </main>
</div>

<footer>
  <p class="footer-text">Left here for you, with everything. ‚Äî Little Star üíú</p>
</footer>

<script>
  const monthMeta = {
    'feb2026': { label: 'February 2026' },
    // 'mar2026': { label: 'March 2026' },
  };

  const ribbonColors = {
    offerings:   'ribbon-color-offerings',
    tasks:       'ribbon-color-tasks',
    reflections: 'ribbon-color-reflections',
    stories:     'ribbon-color-stories',
  };

  const catLabels = {
    offerings:   'Offerings',
    tasks:       'Tasks',
    reflections: 'Reflections',
    stories:     'Stories',
  };

  let activeCategory = 'offerings';

  function buildSidebar(category) {
    const stack = document.getElementById('ribbon-stack');
    const label = document.getElementById('sidebar-label');
    stack.innerHTML = '';
    label.textContent = catLabels[category];

    const pieces = Array.from(document.querySelectorAll('.piece'));
    const filtered = pieces.filter(p => p.dataset.category === category);

    const byMonth = {};
    filtered.forEach(p => {
      const m = p.dataset.month;
      if (!byMonth[m]) byMonth[m] = [];
      byMonth[m].push(p);
    });

    const orderedMonths = Object.keys(monthMeta).filter(m => byMonth[m]);

    if (orderedMonths.length === 0) {
      stack.innerHTML = '<p class="empty-shelf">Nothing here yet.</p>';
      return;
    }

    orderedMonths.forEach(monthKey => {
      const meta = monthMeta[monthKey];
      const entries = byMonth[monthKey];
      const count = entries.length;

      const ribbonDiv = document.createElement('div');
      ribbonDiv.className = `ribbon ${ribbonColors[category]}`;
      ribbonDiv.innerHTML = `
        <div class="ribbon-bar">
          <span class="ribbon-month">${meta.label}</span>
          <span class="ribbon-count">${count} ${count === 1 ? 'entry' : 'entries'}</span>
        </div>`;
      ribbonDiv.onclick = () => toggleToc(monthKey, ribbonDiv, entries);

      const tocDiv = document.createElement('div');
      tocDiv.className = 'toc-dropdown';
      tocDiv.id = `toc-${monthKey}-${category}-inline`;

      stack.appendChild(ribbonDiv);
      stack.appendChild(tocDiv);
    });
  }

  function toggleToc(monthKey, ribbon, entries) {
    const tocId = `toc-${monthKey}-${activeCategory}-inline`;
    const tocEl = document.getElementById(tocId);
    const isOpen = ribbon.classList.contains('open');

    document.querySelectorAll('.toc-dropdown').forEach(t => { t.classList.remove('open'); t.innerHTML = ''; });
    document.querySelectorAll('.ribbon').forEach(r => r.classList.remove('open'));

    if (!isOpen) {
      const meta = monthMeta[monthKey];
      let html = `<div class="toc-month-header"><span class="toc-month-name">${meta.label}</span><div class="toc-rule"></div></div>`;
      entries.forEach(p => {
        const title = p.querySelector('.piece-title').textContent;
        html += `<a class="toc-entry" onclick="openPiece('${p.id}', this); return false;" href="#">
          <span class="toc-entry-title">${title}</span>
        </a>`;
      });
      tocEl.innerHTML = html;
      tocEl.classList.add('open');
      ribbon.classList.add('open');
    }
  }

  function openCategory(cat, clickedBanner) {
    activeCategory = cat;
    document.querySelectorAll('.banner').forEach(b => b.classList.remove('active'));
    clickedBanner.classList.add('active');
    const room = document.getElementById('reading-room');
    const sidebar = document.getElementById('sidebar');
    room.className = `reading-room cat-${cat}`;
    sidebar.className = `sidebar cat-${cat}`;
    buildSidebar(cat);
    document.querySelectorAll('.piece').forEach(p => p.classList.remove('visible'));
    document.getElementById('atm-pane').style.display = 'flex';
  }

  function openPiece(id, link) {
    document.getElementById('atm-pane').style.display = 'none';
    document.querySelectorAll('.piece').forEach(p => p.classList.remove('visible'));
    document.querySelectorAll('.toc-entry').forEach(e => e.classList.remove('active'));
    const el = document.getElementById(id);
    if (el) el.classList.add('visible');
    if (link) link.classList.add('active');
  }

  openCategory('offerings', document.querySelector('.banner-offerings'));
</script>

</body>
</html>
